<!DOCTYPE html>
<html>

<head>
  <title>Leaflet</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin="" />
  <style>
    html,
    body {
      width: 100%;
      height: 100%;
    }

    body {
      padding: 0;
      margin: 0;
    }

    #map_canvas {
      width: 100%;
      height: 100%;
    }

    #geocode_container {
      position: fixed;
      top: 1em;
      left: 4em;
      z-index: 1000;
    }
  </style>
</head>

<body>
  <div id="map_canvas"></div>
  <div id="geocode_container">
    <input id="address" type="textbox" value="Sydney, NSW">
    <input type="button" value="Geocode" onclick="geocode()">
  </div>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>
  <script>
    const geocodeUrl = 'https://nominatim.openstreetmap.org/search?q=';
    const geocodeParams = '&format=json&limit=1';
    var map = null;
    function initialize() {
      var center = L.latLng(0, 0);
      var zoom = 4;
      map = L.map('map_canvas').setView(center, zoom);
      var osm = new L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
        minZoom: 2,
        maxZoom: 18
      });
      map.addLayer(osm);
    }
    function geocode() {
      var address = document.getElementById("address").value;
      var encoded = encodeURI([geocodeUrl, address, geocodeParams].join(''));
      var xhr = new XMLHttpRequest();
      xhr.open("GET", encoded, true);
      xhr.responseType = 'json';
      xhr.onload = function () {
        if (xhr.response.length == 0) {
          alert("No place found");
          return;
        }
        var place = xhr.response[0];
        map.setView([place.lat, place.lon], 12);
        var marker = L.marker([place.lat, place.lon]).addTo(map);
        marker.bindPopup(place.display_name);
      };
      xhr.onerror = function () {
        console.error(xhr.statusText);
      };
      xhr.send();
    }
    window.onload = initialize;
  </script>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous">
  </script>
</body>

</html>
